<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Editable Directive by AmitThakkar</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Editable Directive</h1>
      <h2 class="project-tagline">This repository for containing the generic directive to make a text an editable.</h2>
      <a href="https://github.com/AmitThakkar/EditableDirective" class="btn">View on GitHub</a>
      <a href="https://github.com/AmitThakkar/EditableDirective/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/AmitThakkar/EditableDirective/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
<a id="editable-directive" class="anchor" href="#editable-directive" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Editable-Directive</h1>

<p>This is repository for containing the generic <strong>directive</strong> to make a text <strong>inline editable</strong>.</p>

<p><strong>A very common use case</strong>: We want to make some text <strong>editable</strong>. By word <strong>editable</strong>, I mean, when we click on that text, an input field should appear with that text, where we can update value of that text, and after updating that text new value should also reflect into <strong>scope</strong> and database(by sending ajax request to server with new value). So for this, I have written a small <strong>directive</strong>. Lets first try to use this <strong>editable directive</strong>, then we will understand how this <strong>directive</strong> is actually working.</p>

<p><strong>editable.html</strong></p>

<div class="highlight highlight-text-html-basic"><pre>&lt;!DOCTYPE html&gt;
&lt;<span class="pl-ent">html</span> <span class="pl-e">ng-app</span>=<span class="pl-s"><span class="pl-pds">"</span>editableApp<span class="pl-pds">"</span></span>&gt;
&lt;<span class="pl-ent">head</span>&gt;
    &lt;<span class="pl-ent">title</span>&gt;Admin Module&lt;/<span class="pl-ent">title</span>&gt;
    <span class="pl-c">&lt;!-- Require AngularJS --&gt;</span>
<span class="pl-s1">    &lt;<span class="pl-ent">script</span> <span class="pl-e">type</span>=<span class="pl-s"><span class="pl-pds">"</span>application/javascript<span class="pl-pds">"</span></span> <span class="pl-e">src</span>=<span class="pl-s"><span class="pl-pds">"</span>./js/angular.min.js<span class="pl-pds">"</span></span>&gt;&lt;/<span class="pl-ent">script</span>&gt;</span>
    <span class="pl-c">&lt;!-- Require editableDemo JS --&gt;</span>
<span class="pl-s1">    &lt;<span class="pl-ent">script</span> <span class="pl-e">type</span>=<span class="pl-s"><span class="pl-pds">"</span>application/javascript<span class="pl-pds">"</span></span> <span class="pl-e">src</span>=<span class="pl-s"><span class="pl-pds">"</span>./js/editableDemo.js<span class="pl-pds">"</span></span>&gt;&lt;/<span class="pl-ent">script</span>&gt;</span>
&lt;/<span class="pl-ent">head</span>&gt;

&lt;<span class="pl-ent">body</span>&gt;
&lt;<span class="pl-ent">ul</span> <span class="pl-e">ng-controller</span>=<span class="pl-s"><span class="pl-pds">"</span>UserController as userCtrl<span class="pl-pds">"</span></span>&gt;
    &lt;<span class="pl-ent">li</span>&gt;
        &lt;<span class="pl-ent">span</span>&gt;Id &lt;/<span class="pl-ent">span</span>&gt; |
        &lt;<span class="pl-ent">span</span>&gt;Name&lt;/<span class="pl-ent">span</span>&gt; |
        &lt;<span class="pl-ent">span</span>&gt;Age&lt;/<span class="pl-ent">span</span>&gt; |
        &lt;<span class="pl-ent">span</span>&gt;Salary&lt;/<span class="pl-ent">span</span>&gt;
    &lt;/<span class="pl-ent">li</span>&gt;
    &lt;<span class="pl-ent">li</span> <span class="pl-e">ng-repeat</span>=<span class="pl-s"><span class="pl-pds">"</span>user in userCtrl.users track by user._id<span class="pl-pds">"</span></span>&gt;
        &lt;<span class="pl-ent">span</span>&gt;&lt;<span class="pl-ent">span</span> <span class="pl-e">ng-bind</span>=<span class="pl-s"><span class="pl-pds">"</span>user._id<span class="pl-pds">"</span></span>&gt;&lt;/<span class="pl-ent">span</span>&gt;&lt;/<span class="pl-ent">span</span>&gt; |
        &lt;<span class="pl-ent">span</span> <span class="pl-e">editable</span>=<span class="pl-s"><span class="pl-pds">"</span>user.name<span class="pl-pds">"</span></span>&gt;&lt;/<span class="pl-ent">span</span>&gt; |
        &lt;<span class="pl-ent">span</span> <span class="pl-e">editable</span>=<span class="pl-s"><span class="pl-pds">"</span>user.age<span class="pl-pds">"</span></span>&gt;&lt;/<span class="pl-ent">span</span>&gt; |
        &lt;<span class="pl-ent">span</span> <span class="pl-e">editable</span>=<span class="pl-s"><span class="pl-pds">"</span>user.salary<span class="pl-pds">"</span></span>&gt;&lt;/<span class="pl-ent">span</span>&gt;
    &lt;/<span class="pl-ent">li</span>&gt;
&lt;/<span class="pl-ent">ul</span>&gt;
&lt;/<span class="pl-ent">body</span>&gt;
&lt;/<span class="pl-ent">html</span>&gt;</pre></div>

<p><strong>editableDemo.js</strong></p>

<div class="highlight highlight-source-js"><pre><span class="pl-c">/**</span>
<span class="pl-c"> * Created by Amit Thakkar on 24/7/14.</span>
<span class="pl-c"> */</span>
(<span class="pl-k">function</span> () {
    <span class="pl-s"><span class="pl-pds">'</span>use strict<span class="pl-pds">'</span></span>;

    <span class="pl-c">/*</span>
<span class="pl-c">     * Dummy User list.</span>
<span class="pl-c">     * */</span>
    <span class="pl-k">var</span> users <span class="pl-k">=</span> [
        {
            _id<span class="pl-k">:</span> <span class="pl-c1">1</span>,
            name<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">"</span>Amit Thakkar<span class="pl-pds">"</span></span>,
            age<span class="pl-k">:</span> <span class="pl-c1">25</span>,
            salary<span class="pl-k">:</span> <span class="pl-c1">100000</span>
        },
        {
            _id<span class="pl-k">:</span> <span class="pl-c1">2</span>,
            name<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">"</span>Shreyance Jain<span class="pl-pds">"</span></span>,
            age<span class="pl-k">:</span> <span class="pl-c1">26</span>,
            salary<span class="pl-k">:</span> <span class="pl-c1">200000</span>
        }
    ];

    <span class="pl-c">/*</span>
<span class="pl-c">     * Defining editable Module.</span>
<span class="pl-c">     * */</span>
    <span class="pl-k">var</span> editableApp <span class="pl-k">=</span> <span class="pl-smi">angular</span>.<span class="pl-en">module</span>(<span class="pl-s"><span class="pl-pds">'</span>editableApp<span class="pl-pds">'</span></span>, []);

    <span class="pl-c">/*</span>
<span class="pl-c">     * Defining the UserController.</span>
<span class="pl-c">     * */</span>
    <span class="pl-smi">editableApp</span>.<span class="pl-en">controller</span>(<span class="pl-s"><span class="pl-pds">"</span>UserController<span class="pl-pds">"</span></span>, <span class="pl-k">function</span> () {
        <span class="pl-v">this</span>.<span class="pl-smi">users</span> <span class="pl-k">=</span> <span class="pl-smi">angular</span>.<span class="pl-en">copy</span>(users);
    });

    <span class="pl-smi">editableApp</span>.<span class="pl-en">directive</span>(<span class="pl-s"><span class="pl-pds">"</span>editable<span class="pl-pds">"</span></span>, <span class="pl-k">function</span> () {
        <span class="pl-k">return</span> {
            scope<span class="pl-k">:</span> {
                value<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">"</span>=editable<span class="pl-pds">"</span></span>
            },
            restrict<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">"</span>A<span class="pl-pds">"</span></span>,
            templateUrl<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">"</span>./editableTemplate.html<span class="pl-pds">"</span></span>,
            <span class="pl-en">link</span><span class="pl-k">:</span> <span class="pl-k">function</span> (<span class="pl-smi">scope</span>, <span class="pl-smi">element</span>) {
                <span class="pl-k">var</span> oldValue <span class="pl-k">=</span> <span class="pl-smi">scope</span>.<span class="pl-c1">value</span>;
                <span class="pl-k">var</span> <span class="pl-en">changeEditStat</span> <span class="pl-k">=</span> <span class="pl-k">function</span> (<span class="pl-smi">stat</span>) {
                    <span class="pl-smi">scope</span>.<span class="pl-en">$apply</span>(<span class="pl-k">function</span> () {
                        <span class="pl-smi">scope</span>.<span class="pl-smi">edit</span> <span class="pl-k">=</span> stat;
                    });
                    <span class="pl-k">if</span> (<span class="pl-k">!</span>stat <span class="pl-k">&amp;&amp;</span> <span class="pl-smi">scope</span>.<span class="pl-c1">value</span> <span class="pl-k">!==</span> oldValue) {
                        <span class="pl-en">console</span>.<span class="pl-c1">log</span>(<span class="pl-s"><span class="pl-pds">"</span>Send request if you want to update on server.<span class="pl-pds">"</span></span>);
                    }
                };
                <span class="pl-k">var</span> inputElement <span class="pl-k">=</span> <span class="pl-smi">element</span>.<span class="pl-c1">find</span>(<span class="pl-s"><span class="pl-pds">"</span>input<span class="pl-pds">"</span></span>)[<span class="pl-c1">0</span>];
                <span class="pl-smi">element</span>.<span class="pl-en">on</span>(<span class="pl-s"><span class="pl-pds">"</span>click<span class="pl-pds">"</span></span>, <span class="pl-k">function</span> () {
                    <span class="pl-en">changeEditStat</span>(<span class="pl-c1">true</span>);
                    <span class="pl-smi">inputElement</span>.<span class="pl-c1">focus</span>();
                });
                <span class="pl-smi">angular</span>.<span class="pl-en">element</span>(inputElement).<span class="pl-en">on</span>(<span class="pl-s"><span class="pl-pds">"</span>blur<span class="pl-pds">"</span></span>, <span class="pl-k">function</span>() {
                    <span class="pl-en">changeEditStat</span>(<span class="pl-c1">false</span>);
                });
                <span class="pl-smi">element</span>.<span class="pl-en">on</span>(<span class="pl-s"><span class="pl-pds">"</span>keydown<span class="pl-pds">"</span></span>, <span class="pl-k">function</span> (<span class="pl-c1">event</span>) {
                    <span class="pl-k">if</span> (<span class="pl-c1">event</span>.<span class="pl-smi">keyCode</span> <span class="pl-k">===</span> <span class="pl-c1">13</span>) {
                        <span class="pl-en">changeEditStat</span>(<span class="pl-c1">false</span>);
                    }
                });
            }
        };
    });
})();</pre></div>

<p><strong>editableTemplate.html</strong></p>

<div class="highlight highlight-text-html-basic"><pre>&lt;<span class="pl-ent">span</span> <span class="pl-e">ng-hide</span>=<span class="pl-s"><span class="pl-pds">"</span>edit<span class="pl-pds">"</span></span> <span class="pl-e">ng-bind</span>=<span class="pl-s"><span class="pl-pds">"</span>value<span class="pl-pds">"</span></span>&gt;&lt;/<span class="pl-ent">span</span>&gt;
&lt;<span class="pl-ent">input</span> <span class="pl-e">ng-show</span>=<span class="pl-s"><span class="pl-pds">"</span>edit<span class="pl-pds">"</span></span> <span class="pl-e">ng-model</span>=<span class="pl-s"><span class="pl-pds">"</span>value<span class="pl-pds">"</span></span>&gt;</pre></div>

<p>We are using <strong>editable directive</strong> for making name, age and salary <strong>editable</strong>, for this we just have to mark that element/node with <strong>editable directive</strong> and provide value/text to this which should be <strong>editable</strong>. e.g.</p>

<div class="highlight highlight-text-html-basic"><pre>&lt;<span class="pl-ent">span</span> <span class="pl-e">editable</span>=<span class="pl-s"><span class="pl-pds">"</span>user.name<span class="pl-pds">"</span></span>&gt;&lt;/<span class="pl-ent">span</span>&gt;</pre></div>

<p>That's it, after marking name field with <strong>editable directive</strong>, if we click on name, then it will hide name and will show a text field with text name where we can update name and after updating the name it will also reflect into scope, and we can also send ajax request for real time update(to update database).</p>

<p>Lets understand how <strong>editable directive</strong> is actually working?</p>

<div class="highlight highlight-source-js"><pre><span class="pl-smi">editableApp</span>.<span class="pl-en">directive</span>(<span class="pl-s"><span class="pl-pds">"</span>editable<span class="pl-pds">"</span></span>, <span class="pl-k">function</span> () {
    <span class="pl-k">return</span> {
        scope<span class="pl-k">:</span> {
            value<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">"</span>=editable<span class="pl-pds">"</span></span>
        },
        restrict<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">"</span>A<span class="pl-pds">"</span></span>,
        templateUrl<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">"</span>./editableTemplate.html<span class="pl-pds">"</span></span>,
        <span class="pl-en">link</span><span class="pl-k">:</span> <span class="pl-k">function</span> (<span class="pl-smi">scope</span>, <span class="pl-smi">element</span>) {
            <span class="pl-k">var</span> oldValue <span class="pl-k">=</span> <span class="pl-smi">scope</span>.<span class="pl-c1">value</span>;
            <span class="pl-k">var</span> <span class="pl-en">changeEditStat</span> <span class="pl-k">=</span> <span class="pl-k">function</span> (<span class="pl-smi">stat</span>) {
                <span class="pl-smi">scope</span>.<span class="pl-en">$apply</span>(<span class="pl-k">function</span> () {
                    <span class="pl-smi">scope</span>.<span class="pl-smi">edit</span> <span class="pl-k">=</span> stat;
                });
                <span class="pl-k">if</span> (<span class="pl-k">!</span>stat <span class="pl-k">&amp;&amp;</span> <span class="pl-smi">scope</span>.<span class="pl-c1">value</span> <span class="pl-k">!==</span> oldValue) {
                    <span class="pl-en">console</span>.<span class="pl-c1">log</span>(<span class="pl-s"><span class="pl-pds">"</span>Send Request if you want to update on server.<span class="pl-pds">"</span></span>);
                }
            };
            <span class="pl-k">var</span> inputElement <span class="pl-k">=</span> <span class="pl-smi">element</span>.<span class="pl-c1">find</span>(<span class="pl-s"><span class="pl-pds">"</span>input<span class="pl-pds">"</span></span>)[<span class="pl-c1">0</span>];
            <span class="pl-smi">element</span>.<span class="pl-en">on</span>(<span class="pl-s"><span class="pl-pds">"</span>click<span class="pl-pds">"</span></span>, <span class="pl-k">function</span> () {
                <span class="pl-en">changeEditStat</span>(<span class="pl-c1">true</span>);
                <span class="pl-smi">inputElement</span>.<span class="pl-c1">focus</span>();
            });
            <span class="pl-smi">angular</span>.<span class="pl-en">element</span>(inputElement).<span class="pl-en">on</span>(<span class="pl-s"><span class="pl-pds">"</span>blur<span class="pl-pds">"</span></span>, <span class="pl-k">function</span>() {
                <span class="pl-en">changeEditStat</span>(<span class="pl-c1">false</span>);
            });
            <span class="pl-smi">element</span>.<span class="pl-en">on</span>(<span class="pl-s"><span class="pl-pds">"</span>keydown<span class="pl-pds">"</span></span>, <span class="pl-k">function</span> (<span class="pl-c1">event</span>) {
                <span class="pl-k">if</span> (<span class="pl-c1">event</span>.<span class="pl-smi">keyCode</span> <span class="pl-k">===</span> <span class="pl-c1">13</span>) {
                    <span class="pl-en">changeEditStat</span>(<span class="pl-c1">false</span>);
                }
            });
        }
    };
});</pre></div>

<p>We can see <strong>editable directive</strong> is having <strong><a href="http://codechutney.in/blog/angularjs/scope-in-angularjs/">isolated scope</a></strong> and we are assigning text into property value via <strong><a href="http://codechutney.in/blog/angularjs/notation-symbols-in-isolated-scope/">== notation symbol</a></strong>. So <strong>two-way-binding</strong> will happen between property value of <strong>isolated scope</strong> and the property of parent scope which is passed with <strong>editable directive</strong>. We are making <strong>directive</strong> <a href="http://codechutney.in/blog/angularjs/component-in-angularjs/">restrict</a> to 'A', so it can be used as attribute only. And we are providing html with <a href="http://codechutney.in/blog/angularjs/component-in-angularjs/">templateUrl</a>, which contains the html which will be inserted into marked element/node. And with the help <strong>link</strong> property we are attaching <strong>editable</strong> behavior to that node/element.</p>

<h2>
<a id="follow-me" class="anchor" href="#follow-me" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Follow Me</h2>

<p><a href="https://github.com/AmitThakkar">Github</a></p>

<p><a href="https://twitter.com/amit_thakkar01">Twitter</a></p>

<p><a href="https://in.linkedin.com/in/amitthakkar01">LinkedIn</a></p>

<p><a href="http://amitthakkar.github.io/">More Blogs By Me</a></p>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/AmitThakkar/EditableDirective">Editable Directive</a> is maintained by <a href="https://github.com/AmitThakkar">AmitThakkar</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
